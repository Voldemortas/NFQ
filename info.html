<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Švieslentė</title>
    </head>
    <body>
        <div id="info"></div>
        <script src="scripts/init.js"></script>
        <script>
            function show() {
                loadStorage();
                if (data.length == 0) {
                    document.getElementById('info').innerHTML =
                        'Nepavyko užkrauti duomenų';
                    return;
                }
                let sorted = data
                    .sort((a, b) => b.time - a.time)
                    .sort((a, b) => (a.subject > b.subject ? 1 : -1))
                    .map(e => e.subject + ' ' + (e.id + '').padStart(3, '0'));
                document.getElementById('info').innerHTML = sorted.join(
                    '<br />'
                );
            }
            show();
            try {
                setInterval(show, 5000);
            } catch {}
        </script>
    </body>
</html>
